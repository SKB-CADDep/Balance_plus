# [CALC-COND-BERMAN] Расчет давления в конденсаторе по методике Бермана

**Версия документа:** 1.5<br>
**Статус:** Проверен<br>
**Ответственный:** @D0k2<br>
**Участники**: -

## 1. Назначение
Методика предназначена для расчета абсолютного давления пара в конденсаторе $P_{steam}$ (давление за последней ступенью турбины, без учета гидравлических потерь в переходном патрубке) на основе геометрических характеристик конденсатора и параметров охлаждающей воды. Расчет ведется согласно нормативному методу Л.Д. Бермана для температур охлаждающей воды до 45°С.

Алгоритм учитывает наличие двух пучков трубок: основного (ОП) и встроенного (ВП).

## 2. Источники и Нормативы
*   [1] Старый скрипт написанный на VBA (макрос для Excel файлов).
*   [2] IAPWS-IF97 (для свойств воды и пара).

## 3. Область применения и допущения
*   **Применимость:** Поверхностные конденсаторы паровых турбин.
*   **Ограничение:**
    *   Температура охлаждающей воды на входе $t1_{main} < 45^\circ\text{C}$.
    *   Температура на входе в основной и встроенный пучки может незначительно отличаться (для корректных результатов используйте значения с разницей не более 10 °C).
*   **Допущения:**
    *   Процесс теплопередачи рассматривается раздельно для основного и встроенного пучков.
    *   Давление в паровом пространстве принимается одинаковым для обоих пучков (итерационный подбор).
    *   Учитывается влияние воздушной плотности через характеристику эжектора.

## 4. Входные данные

### 4.1. Геометрия конденсатора (из базы данных)
| Параметр | Обозначение (Код) | Символ | Единица | Описание |
| :--- | :--- | :---: | :---: | :--- |
| Внутренний диаметр труб | `d_in` | $d_{in}$ | мм | Внутренний диаметр труб охлаждения |
| Толщина стенки трубы | `S_tube` | $S_{tube}$ | мм | Толщина стенки труб охлаждения |
| Активная длина труб ОП | `L_main` | $L_{main}$ | мм | Длина теплообменной части основного пучка (между трубными досками) |
| Число труб (ОП) | `N_main` | $N_{main}$ | шт | Количество охлаждающих труб основного пучка |
| Длина труб (ВП) | `L_builtin` | $L_{builtin}$ | мм | Длина теплообменной части встроенного пучка |
| Число труб (ВП) | `N_builtin` | $N_{builtin}$ | шт | Количество охлаждающих труб встроенного пучка |
| Коэффициент теплопроводности | `lambda` | $\lambda$ | Вт/(м·°С) | Свойство материала трубок |

> Примечание:
> 1. Коэффициент теплопроводности `lambda` подгружается по `material_id` из БД [DB-MATERIALS](https://github.com/LevShlyogin/Balance_plus/blob/main/docs/methods/database_structure/DB-MATERIALS.md) как зависимость $lambda = f(t_{avg})$

### 4.2. Диапазоны работы конденсатора (из базы данных)
| Параметр | Обозначение (Код) | Символ | Единица | Описание |
| :--- | :--- | :---: | :---: | :--- |
| Расход воздуха | `G_air` | $G_{air}$ | кг/ч | Номинальная величина присосов воздуха в конденсатор по паспорту |
| Расход пара ном. | `G_nom` | $G_{nom}$ | т/ч | Номинальный расход пара в конденсатор |

### 4.3. Режимные параметры (ввод пользователя / исходные данные JSON-файла)
| Параметр | Обозначение (Код) | Символ | Единица | Описание |
| :--- | :--- | :---: | :---: | :--- |
| Коэффициент загрязнения | `coefficient_b` | $\beta$ | - | Указывает на степень загрязнения внутренней поверхност трубок охлаждения |
| Число ходов (ОП) | `Z_main` | $Z_{main}$ | - | Конструктивное число ходов в основном пучке |
| Число ходов (ВП) | `Z_builtin` | $Z_{builtin}$ | - | Конструктивное число ходов во встроенном пучке |
| Число эжекторов | `Z_ejectors` | $Z_{ejectors}$ | шт | Default = 1 |
| Расход охл. воды (ОП) | `W_main` | $W_{main}$ | т/ч | Расход охлаждающей воды перед основным пучком конденсатора |
| Расход охл. воды (ВП) | `W_builtin` | $W_{builtin}$ | т/ч | Расход охлаждающий воды перед встроенным пучком конденсатора |
| Темп. воды вход (ОП) | `t1_main` | $t1_{main}$ | °С | Температура охлаждающей воды на входе в основной пучок конденсатора |
| Темп. воды вход (ВП) | `t1_builtin` | $t1_{builtin}$ | °С | Температура охлаждающей воды на входе в встроенный пучок конденсатора. Обычно равна $t1_{main}$ |
| Расход пара на входе | `G_steam` | $G_{steam}$ | т/ч | Расход пара на входе в конденсатор |
| Энтальпия пара на входе | `H_steam` | $H_{steam}$ | кДж/кг | Энтальпия пара на входе в конденсатор |

## 5. Свойства среды (IF97 / Lookups)
| Параметр | Функция IF97 / Источник | Зависимость | Единица |
| :--- | :--- | :---: | :---: |
| Давление насыщения | `P = tx(t_sat, 1.0, 0)` | $P_{sat} = f(t_{sat})$ | Па |

## 6. Алгоритм расчета

### Шаг 1. Геометрические характеристики

Площадь поверхности теплообмена (основной $F_{main}$ (`F_main`) и встроенный $F_{builtin}$ (`F_builtin`) пучки):

$$ F_{main} = \pi \cdot L_{main} \cdot N_{main} \cdot (d_{in} + 2 \cdot S_{tube}) $$

$$ F_{builtin} = \pi \cdot L_{builtin} \cdot N_{builtin} \cdot (d_{in} + 2 \cdot S_{tube}) $$

> Примечание:
> 1. Параметры $L_{main}$, $L_{builtin}$ переводим в [м]
> 2. Для валидации используем число $pi = 3.14159$ 

### Шаг 2. Гидравлические и нагрузочные характеристики
Удельная номинальная паровая нагрузка (`g_k_nom`):

$$ g_{k\_{nom}} = \frac{G_{nom}}{F_{main} + F_{builtin}} $$

> Примечание:
> 1. Параметр $G_{nom}$ переводим в [кг/ч]

Скорость воды в трубках ($C_{main}$ (`C_main`), $C_{builtin}$ (`C_builtin`)):

$$ C_{main} = \frac{W_{main} \cdot Z_{main}}{900 \cdot \pi \cdot N_{main} \cdot d_{in}^2} $$

$$ C_{builtin} = \frac{W_{builtin} \cdot Z_{builtin}}{900 \cdot \pi \cdot N_{builtin} \cdot d_{in}^2} $$

> Примечание:
> 1. Параметр $d_{in}$ переводим в $[\textм]$
> 2. Для валидации используем число $pi = 3.14159$ 

### Шаг 3. Расчет поправочных коэффициентов
*Далее формулы приводятся для ОП. Для ВП расчет аналогичен с заменой индексов и соответствующих температур.*

**3.1 Коэффициенты $B$ (`B`) и $X$ (`X`):**

$$ B = \frac{1.1 \cdot C_{main}}{d_{in}^{0.25}}, \quad X = 0.12 \cdot (1 + 0.15 \cdot t1_{main}) $$

> Примечание:
> 1. Параметр $d_{in}$ используем в $[\text{мм}]$

**3.2 Коэффициент скорости воды ($\Phi_c$ (`Phi_c`)):**

$$ \Phi_c = B^X $$

**3.3 Коэффициент температуры воды ($\Phi_t$ (`Phi_t`)):**

* Если $t1_{main} < 35^\circ\text{C}$:

$$ \Phi_t = 1 - \frac{0.42}{1000} \cdot (35 - t1_{main})^2 $$

* Если $t1_{main} \ge 35^\circ\text{C}$:

$$ \Phi_t = 1 + 0.002 \cdot (t1_{main} - 35) $$

**3.4 Коэффициент числа ходов ($\Phi_z$ (`Phi_z`)):**

*   Если $t1_{main} < 35^\circ\text{C}$:

$$ \Phi_z = 1 + \frac{Z_{main} - 2}{10} \cdot \left(1 - \frac{t1_{main}}{35}\right) $$

*   Если $t1_{main} \ge 35^\circ\text{C}$:

$$ \Phi_z = 1 + \frac{Z_{main} - 2}{10} \cdot \left(1 - \frac{t1_{main}}{45}\right) $$

**3.5 Коэффициент удельной паровой нагрузки ($\Phi_g$ (`Phi_g`)):**

Приведенный расход пара (`g_k_priv`):

$$ g_{k\_{priv}} = (0.9 - 0.012 \cdot t1_{main}) \cdot g_{k\_{nom}}$$

Текущая удельная нагрузка (`g_k`):

$$ g_k = \frac{G_{steam}}{F_{main} + F_{builtin}} $$

> Примечание:
> 1. Параметр $G_{steam}$ переводим в [кг/ч]

*   Если $g_k / g_{k\_{priv}} \ge 1$:

$$\Phi_g = 1$$

*   Если $g_k / g_{k\_{priv}} < 1$:

$$ \Phi_g = \frac{g_k}{g_{k\_{priv}}} \cdot \left(2 - \frac{g_k}{g_{k\_{priv}}}\right) $$

### Шаг 4. Коэффициент теплопередачи

Коэффициент теплопередачи базовый ($K_{base}$ (`K_base`)):

$$ K_{base} = 3500 \cdot \Phi_c \cdot \Phi_t \cdot \Phi_z $$

Коэффициент теплопередачи с учетом паровой нагрузки ($K_{load}$ (`K_load`)):

$$ K_{load} = K_{base} \cdot \Phi_g $$

Коэффициент теплопередачи с учетом материала стенки (чистый) ($K_{clean}$ (`K_clean`)):

$$ K_{clean} = \left( \frac{1}{K_{load}} + \frac{S_{tube}}{\lambda} - \frac{0.001}{90} \right)^{-1} $$

> Примечание:
> 1. Параметр $S_{tube}$ переводим в $[\textм]$
> 2. Термическое сопротивление эталонной латунной трубки ($\lambda = 90 [Вт/(м·°С)], \delta = 1 [\textмм]$), для которой была выведена эмпирическая формула Бермана

Коэффициент теплопередачи с учетом загрязнения ($K_{dirty}$ (`K_dirty`)):

$$ K_{dirty} = \left( \frac{1}{K_{clean}} + R^* \right)^{-1} $$

> Примечание:
> 1. Выбор $R^*$ зависит от коэффициента $\beta$ (`coefficient_b`) и определяется по зависимости:
> 
> $$R^* = (417.3 - 417.2 \cdot \beta) \cdot 10^{-6}$$
> 
> 2. Зависимость основывана на следующих данных:
> 
> | Параметр | знач.1 | знач.2 | знач.3 | знач.4 | знач.5 |
> | :---: | :---: | :---: | :---: | :---: | :---: |
> | $\beta$ | **1.00** | **0.75** | 0.50 | 0.25 | 0.00 |
> | $R^* \cdot 10^{-6}$ | **0.10** | **104.40** | 208.70 | 313.00 | 417.30 |


### Шаг 5. Тепловой расчет и итерация

Коэффициент $D$ (`D`):

$$ D = g_k \cdot F_{main} $$

Нагрев воды ($\Delta t_{heat}$ (`delta_t_heat`)):

$$ \Delta t_{heat} = \frac{D \cdot H_{steam}}{W_{main} \cdot C_p} $$

> Примечание:
> 1. Параметр $W_{main}$ переводим в $[\text{кг/ч}]$
> 2. Теплота конденсации $H_{steam} = H - H'_{cond}$ определяется как разность энтальпий перед конденсатором и энтальпии конденсата 
> 3. $C_p$ — удельная изобарная теплоемкость воды. Принимается $C_p ≈ 1.0 \textккал/(кг\cdotp°C)$, поскольку энтальпия в $\text{ккал}$.

Температурный напор ($\delta t$ (`delta_t`)):

$$ \delta t = \frac{\Delta t_{heat}}{\exp\left(\frac{K_{dirty} \cdot F_{main}}{W_{main}}\right) - 1} $$

> Примечание:
> 1. Параметр $W_{main}$ переводим в $[\text{кг/ч}]$

Температура насыщения ($t_{sat}$ (`t_sat`)):

$$ t_{sat} = t1_{main} + \Delta t_{heat} + \delta t $$


**Итерационный процесс:**
Необходимо подобрать распределение нагрузки так, чтобы температуры насыщения в основном и встроенном пучках совпали:

$$ |t_{sat}^{main} - t_{sat}^{builtin}| \le 0.000001 $$

В рамках упрощенного алгоритма производится балансировка нагрева воды встроенного пучка:

$$ \Delta t_{heat}^{builtin} = \frac{G_{steam} \cdot H_{steam} - \Delta t_{heat}^{main} \cdot W_{main}}{W_{builtin}} $$

После чего пересчитывается $t_{sat}^{builtin}$.

### Шаг 6. Определение итогового давления

**1. Давление в конденсаторе ($P_{steam}$ (`P_steam`)):**

Определяется по таблицам насыщенного пара (IF97) для найденной температуры $t_{sat}^{main}$:

$$ P_{steam} = f_{sat}(t_{sat}^{main}) \quad [\text{Па}] $$

> Примечание:
> 1. Итоговый параметр $P_{steam}$ переводим в $[\text{кгс/см}^2]$
> 2. Для валидации используем уравнение:
> 
> $$ P_{steam} = \frac{\exp\left( 82.86568 + \frac{1.028003}{100} \cdot t1_{sat}^{main} - \frac{7821.541}{t1_{sat}^{main}} - 11.48776 \cdot \ln(t1_{sat}^{main}) \right)}{0.0980665} [\text{кПа}] $$
> 
> 3. Параметр $t_{sat}^{main}$, для валидации, переводим в $[\text{К}]$


**2. Характеристика эжектора ($P_{ejector}$ `P_ejector`):**

$$ P_{ejector} = \frac{0.009 + 0.0003 \frac{G_{air}}{Z_{ejectors}} + 10 \cdot \exp\left( \frac{-7.821541}{T} + 82.86586 + 10.28 \cdot T - 11.48776 \cdot \ln(T) \right)}{0.980665} \cdot 100 [\text{кПа}]$$

> Примечание:
> 1. Параметр $T$ определяется как: $T = \frac{t1_{sat}^{main} + 1}{1000}$
> 2. Параметр $t_{sat}^{main}$ переводим в [К]
> 3. Итоговый параметр $P_{ejector}$ переводим в $[\text{кгс/см}^2]$

## 7. Выходные данные (Outputs)

### 7.1. Выходные данные расчета конденсатора

В данном разделе описана структура возвращаемого объекта JSON (список словарей `main_results`).

| Параметр | Переменная в коде | Символ | Единица | Описание |
| :--- | :--- | :---: | :---: | :--- |
| Площадь поверхности | `F_main`, `F_builtin` | $F_{main}, F_{builtin}$ | $м^2$ | Площадь поверхности теплообмена (ОП и ВП) |
| Уд. паровая нагрузка ном. | `g_k_nom` | $g_{k\_nom}$ | $\frac{кг}{м^2 \cdot ч}$ | Номинальная удельная паровая нагрузка на конденсатор |
| Скорость воды | `C_main`, `C_builtin` | $C_{main}, C_{builtin}$ | $м/с$ | Скорость охлаждающей воды в трубках |
| Коэф. (геометрия) | `B_main`, `B_builtin` | $B$ | - | Промежуточный коэффициент (функция от скорости и диаметра) |
| Коэф. (степень) | `X_main`, `X_builtin` | $X$ | - | Показатель степени для расчета $\Phi_c$ |
| Коэф. скорости воды | `Phi_c_main`, `Phi_c_builtin` | $\Phi_c$ | - | Поправка на скорость воды |
| Коэф. числа ходов | `Phi_z_main`, `Phi_z_builtin` | $\Phi_z$ | - | Поправка на число ходов |
| Коэф. температуры воды | `Phi_t_main`, `Phi_t_builtin` | $\Phi_t$ | - | Поправка на температуру входящей воды |
| Приведенный расход пара | `g_k_priv_main`, `g_k_priv_builtin` | $g_{k\_priv}$ | $\frac{кг}{м^2 \cdot ч}$ | Приведенный (граничный) удельный расход пара |
| Текущая паровая нагрузка | `g_k` | $g_k$ | $\frac{кг}{м^2 \cdot ч}$ | Фактическая удельная паровая нагрузка (распределенная) |
| Коэф. паровой нагрузки | `Phi_g_main`, `Phi_g_builtin` | $\Phi_g$ | - | Поправка на паровую нагрузку |
| Базовый коэф. теплопередачи | `K_base_main`, `K_base_builtin` | $K_{base}$ | $\frac{ккал}{м^2 \cdot ч \cdot °С}$ | Расчетный коэффициент теплопередачи (идеальный) |
| Коэф. теплопередачи (нагрузка) | `K_load_main`, `K_load_builtin` | $K_{load}$ | $\frac{ккал}{м^2 \cdot ч \cdot °С}$ | С учетом паровой нагрузки |
| Коэф. теплопередачи (чистый) | `K_clean_main`, `K_clean_builtin` | $K_{clean}$ | $\frac{ккал}{м^2 \cdot ч \cdot °С}$ | С учетом материала стенки (латунь/нерж. сталь) |
| Коэф. теплопередачи (грязный) | `K_dirty_main`, `K_dirty_builtin` | $K_{dirty}$ | $\frac{ккал}{м^2 \cdot ч \cdot °С}$ | Итоговый коэффициент с учетом загрязнения |
| Кол-во конденсируемого пара | `D` | $D$ | $кг/ч$ | Расход пара, приходящийся на данный пучок |
| Нагрев воды | `delta_t_heat_main`, `delta_t_heat_builtin` | $\Delta t_{heat}$ | $°C$ | Перепад температур воды (выход - вход) |
| Температурный напор | `delta_t_main`, `delta_t_builtin` | $\delta t$ | $°C$ | Разность между температурой насыщения и температурой воды на выходе |
| Температура насыщения | `t_sat` | $t_{sat}$ | $°C$ | Итоговая расчетная температура насыщения пара |
| Температура воды вых. | `t2_main`, `t2_builtin` | $t_2$ | $°C$ | Температура циркуляционной воды после конденсатора |
| Давление (SEUIF) | `P_steam_seuif_Pa` | $P_{seuif}$ | $Па$ | Давление насыщения по библиотеке IAPWS-IF97 |
| Давление (SEUIF) атм | `P_steam_seuif_atm` | $P_{seuif}$ | $атм$ | То же, в технических атмосферах ($\text{кгс/см}^2$) |
| Давление (Формула) | `P_steam_formula_Pa` | $P_{form}$ | $кПа$ | Давление насыщения по упрощенной формуле (валидация) |
| Давление (Формула) атм | `P_steam_formula_atm` | $P_{form}$ | $атм$ | То же, в технических атмосферах ($\text{кгс/см}^2$) |

### 7.2. Выходные данные расчета эжектора

В данном разделе описана структура возвращаемого объекта JSON (список словарей `ejector_results`).

| Параметр | Переменная в коде | Символ | Единица | Описание |
| :--- | :--- | :---: | :---: | :--- |
| Количество эжекторов | `number_of_ejectors` | $Z_{ejectors}$ | шт | Количество параллельно работающих эжекторов, для которых выполнен расчет |
| Давление всасывания (кПа) | `P_ejector_kPa` | $P_{ejector}$ | $кПа$ | Абсолютное давление на всасе эжектора (характеристика эжектора) |
| Давление всасывания (атм) | `P_ejector_atm` | $P_{ejector}$ | $атм$ | То же, в технических атмосферах ($кгс/см^2$) |

### 7.3. JSON-файл представления

```json
[
    [
        {
           "F_main": Null,
           "F_builtin": Null,
           "g_k_nom": Null,
           "C_main": Null,
           "C_builtin": Null,
           "B_main": Null,
           "B_builtin": Null,
           "X_main": Null,
           "X_builtin": Null,
           "Phi_c_main": Null,
           "Phi_c_builtin": Null,
           "Phi_z_main": Null,
           "Phi_z_builtin": Null,
           "Phi_t_main": Null,
           "Phi_t_builtin": Null,
           "g_k_priv_main": Null,
           "g_k_priv_builtin": Null,
           "g_k": Null,
           "Phi_g_main": Null,
           "Phi_g_builtin": Null,
           "K_base_main": Null,
           "K_base_builtin": Null,
           "K_load_main": Null,
           "K_load_builtin": Null,
           "K_clean_main": Null,
           "K_clean_builtin": Null,
           "K_dirty_main": Null,
           "K_dirty_builtin": Null,
           "D": Null,
           "delta_t_heat_main": Null,
           "delta_t_heat_builtin": Null,
           "delta_t_main": Null,
           "delta_t_builtin": Null,
           "t_sat": Null,
           "t2_main": Null,
           "t2_builtin": Null,
           "P_steam_seuif_Pa": Null,
           "P_steam_seuif_atm": Null,
           "P_steam_formula_Pa": Null,
           "P_steam_formula_atm": Null
       },
       // Альтернативная схема вывода
   ],
   [
       {
           "number_of_ejectors": Null,
           "P_ejector_kPa": Null,
           "P_ejector_atm": Null
       },
       // Альтернативная схема вывода
    ]
]
```

## 8. Контрольный пример (Verification)

**Общие входные данные для всех сценариев:**
*   **Геометрия:**
    *   `L_main` = 7500 мм, `L_builtin` = 7500 мм
    *   `N_main` = 12000 шт, `N_builtin` = 4000 шт
    *   `d_in` = 20.0 мм, `S_tube` = 1.0 мм
    *   `Z_main` = 2, `Z_builtin` = 2
*   **Параметры:**
    *   `G_nom` = 350 т/ч
    *   `H_steam` = 515.0 ккал/кг (энтальпия сброса)
    *   `G_steam` = 200 т/ч (фактический расход пара)
    *   `coefficient_b` = 1.0 (чистые трубки)
    *   `t1_main` = 20 °C, `t1_builtin` = 20 °C

### 8.1. Результаты расчета тепловой схемы

Проверка выполняется для трех режимов работы циркуляционной системы. Основной контролируемый параметр — температура насыщения $t_{sat}$.

| № | Сценарий | Входные условия (Расходы воды, $м^3/ч$) | Ожидаемое $t_{sat}$, °C |
| :--- | :--- | :--- | :---: |
| 1 | **Только ОП** | $W_{main}=12000$, $W_{builtin}=0$ | **30.898** |
| 2 | **ОП + ВП** | $W_{main}=12000$, $W_{builtin}=4000$ | **28.173** |
| 3 | **Только ВП** | $W_{main}=0$, $W_{builtin}=4000$ | **52.694** |

### 8.2. Результаты расчета эжекторов

Проверка давления всасывания эжекторов для $t_{воды} = 20^\circ C$ и присосов воздуха $G_{air} = 16.5$ кг/ч.

| Кол-во эжекторов | Ожидаемое давление ($P_{ejector}$), $кгс/см^2$ |
| :---: | :---: |
| 1 | **0.03955** |
| 2 | **0.03702** |
