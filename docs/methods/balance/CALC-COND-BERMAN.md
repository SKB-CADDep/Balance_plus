# [CALC-COND-BERMAN] Расчет давления в конденсаторе по методике Бермана

**Версия документа:** 1.4<br>
**Статус:** Черновик<br>
**Ответственный:** @D0k2<br>
**Участники**: -

## 1. Назначение
Методика предназначена для расчета абсолютного давления пара в конденсаторе $P_{steam}$ (давление за последней ступенью турбины) на основе геометрических характеристик конденсатора и параметров охлаждающей воды. Расчет ведется согласно нормативному методу Л.Д. Бермана для температур охлаждающей воды до 45°С.

Алгоритм учитывает наличие двух пучков трубок: основного (ОП) и встроенного (ВП).

## 2. Источники и Нормативы
*   [1] Старый скрипт написанный на VBA (макрос для Excel файлов).
*   [2] IAPWS-IF97 (для свойств воды и пара).

## 3. Область применения и допущения
*   **Применимость:** Поверхностные конденсаторы паровых турбин.
*   **Ограничение:** Температура охлаждающей воды на входе $t1_{main} < 45^\circ\text{C}$.
*   **Допущения:**
    *   Процесс теплопередачи рассматривается раздельно для основного и встроенного пучков.
    *   Давление в паровом пространстве принимается одинаковым для обоих пучков (итерационный подбор).
    *   Учитывается влияние воздушной плотности через характеристику эжектора.

## 4. Входные данные

### 4.1. Геометрия конденсатора (из базы данных)
| Параметр | Обозначение (Код) | Символ | Единица | Описание |
| :--- | :--- | :---: | :---: | :--- |
| Внутренний диаметр труб | `d_in` | $d_{in}$ | мм | Внутренний диаметр труб охлаждения |
| Толщина стенки трубы | `S_tube` | $S_{tube}$ | мм | Толщина стенки труб охлаждения |
| Активная длина труб ОП | `L_main` | $L_{main}$ | мм | Длина теплообменной части основного пучка (между трубными досками) |
| Число труб (ОП) | `N_main` | $N_{main}$ | шт | Количество охлаждающих труб основного пучка |
| Длина труб (ВП) | `L_builtin` | $L_{builtin}$ | мм | Длина теплообменной части встроенного пучка |
| Число труб (ВП) | `N_builtin` | $N_{builtin}$ | шт | Количество охлаждающих труб встроенного пучка |
| Коэффициент теплопроводности | `lambda` | $\lambda$ | Вт/(м·°С) | Свойство материала трубок |

> Примечание:
> 1. Коэффициент теплопроводности `lambda` подгружается по `material_id` из БД [DB-MATERIALS](https://github.com/LevShlyogin/Balance_plus/blob/main/docs/methods/database_structure/DB-MATERIALS.md) как зависимость $lambda = f(t_{avg})$

### 4.2. Диапазоны работы конденсатора (из базы данных)
| Параметр | Обозначение (Код) | Символ | Единица | Описание |
| :--- | :--- | :---: | :---: | :--- |
| Расход воздуха | `G_air` | $G_{air}$ | кг/ч | Номинальная величина присосов воздуха в конденсатор по паспорту |
| Расход пара ном. | `G_nom` | $G_{nom}$ | т/ч | Номинальный расход пара в конденсатор |

### 4.3. Режимные параметры (ввод пользователя / исходные данный JSON-файла)
| Параметр | Обозначение (Код) | Символ | Единица | Описание |
| :--- | :--- | :---: | :---: | :--- |
| Коэффициент загрязнения | `coefficient_b` | $\beta$ | - | Указывает на степень загрязнения внутренней поверхност трубок охлаждения |
| Число ходов (ОП) | `Z_main` | $Z_{main}$ | - | Конструктивное число ходов в основном пучке |
| Число ходов (ВП) | `Z_builtin` | $Z_{builtin}$ | - | Конструктивное число ходов во встроенном пучке |
| Число эжекторов | `Z_ejectors` | $Z_{ejectors}$ | шт | Default = 1 |
| Расход охл. воды (ОП) | `W_main` | $W_{main}$ | т/ч | Расход охлаждающей воды перед основным пучком конденсатора |
| Расход охл. воды (ВП) | `W_builtin` | $W_{builtin}$ | т/ч | Расход охлаждающий воды перед встроенным пучком конденсатора |
| Темп. воды вход (ОП) | `t1_main` | $t1_{main}$ | °С | Температура охлаждающей воды на входе в основной пучок конденсатора |
| Темп. воды вход (ВП) | `t1_builtin` | $t1_{builtin}$ | °С | Температура охлаждающей воды на входе в встроенный пучок конденсатора. Обычно равна $t1_{main}$ |
| Расход пара на входе | `G_steam` | $G_{steam}$ | т/ч | Расход пара на выходе из турбины |
| Энтальпия пара на входе | `H_steam` | $H_{steam}$ | кДж/кг | Энтальпия пара на выходе из турбины |

## 5. Свойства среды (IF97 / Lookups)
| Параметр | Функция IF97 / Источник | Зависимость | Единица |
| :--- | :--- | :---: | :---: |
| Давление насыщения | `tsat2p` | $P_{sat} = f(t_{sat})$ | МПа (перевод в кгс/см²) |

## 6. Алгоритм расчета

### Шаг 1. Геометрические характеристики
Наружный диаметр трубок:

$$ d_{out} = d_{in} + 2 \cdot S_{tube} $$

Площадь поверхности теплообмена (основной $F_{main}$ и встроенный $F_{builtin}$ пучки):

$$ F_{main} = \pi \cdot L_{main} \cdot N_{main} \cdot d_{out} $$

$$ F_{builtin} = \pi \cdot L_{builtin} \cdot N_{builtin} \cdot d_{out} $$

> Примечание:
> 1. Параметры $L_{main}$, $L_{builtin}$, $d_{out}$ переводим в [м]
> 2. Для валидации используем число $pi = 3.14159$ 

### Шаг 2. Гидравлические и нагрузочные характеристики
Удельная номинальная паровая нагрузка:

$$ g_{k\_nom} = \frac{G_{nom}}{F_{main} + F_{builtin}} $$

> Примечание:
> 1. Параметр $G_{nom}$ переводим в [кг/ч]

Скорость воды в трубках ($C_{main}, C_{builtin}$):

$$ C_{main} = \frac{W_{main} \cdot Z_{main}}{900 \cdot \pi \cdot N_{main} \cdot d_{in}^2} $$

$$ C_{builtin} = \frac{W_{builtin} \cdot Z_{builtin}}{900 \cdot \pi \cdot N_{builtin} \cdot d_{in}^2} $$

> Примечание:
> 1. Параметр $d_{in}$ переводим в [м]
> 2. Для валидации используем число $pi = 3.14159$ 

### Шаг 3. Расчет поправочных коэффициентов
*Далее формулы приводятся для ОП. Для ВП расчет аналогичен с заменой индексов и соответствующих температур.*

**3.1 Коэффициенты $B$ и $X$:**

$$ B = \frac{1.1 \cdot C}{d_{in}^{0.25}}, \quad X = 0.12 \cdot (1 + 0.15 \cdot t1_{main}) $$

**3.2 Коэффициент скорости воды ($\Phi_w$):**

$$ \Phi_w = B^X $$

**3.3 Коэффициент температуры воды ($\Phi_t$):**

* Если $t1_{main} < 35^\circ\text{C}$:

$$ \Phi_t = 1 - \frac{0.42}{1000} \cdot (35 - t1_{main})^2 $$

* Если $t1_{main} \ge 35^\circ\text{C}$:

$$ \Phi_t = 1 + 0.002 \cdot (t1_{main} - 35) $$

**3.4 Коэффициент числа ходов ($\Phi_z$):**

*   Если $t1_{main} < 35^\circ\text{C}$:

$$ \Phi_z = 1 + \frac{Z - 2}{10} \cdot \left(1 - \frac{t1_{main}}{35}\right) $$

*   Если $t1_{main} \ge 35^\circ\text{C}$:

$$ \Phi_z = 1 + \frac{Z - 2}{10} \cdot \left(1 - \frac{t1_{main}}{45}\right) $$

**3.5 Коэффициент удельной паровой нагрузки ($\Phi_g$):**

Приведенный расход пара:

$$ g_{k\_priv} = (0.9 - 0.012 \cdot t1_{main}) \cdot g_{k\_nom} $$

Текущая удельная нагрузка:

$$ g_k = \frac{G_{steam} \cdot 1000}{F_{main} + F_{builtin}} $$

*   Если $g_k / g_{k\_priv} \ge 1$:

$$\Phi_g = 1$$

*   Если $g_k / g_{k\_priv} < 1$:

$$ \Phi_g = \frac{g_k}{g_{k\_priv}} \cdot \left(2 - \frac{g_k}{g_{k\_priv}}\right) $$

### Шаг 4. Коэффициент теплопередачи

Базовый коэффициент теплопередачи ($K$):

$$ K = 3500 \cdot \Phi_w \cdot \Phi_t \cdot \Phi_z \cdot \Phi_g $$

С учетом материала стенки ($K_{mat}$):

$$ K_{mat} = \left( \frac{1}{K} + \frac{s_{tube}}{\lambda} - \frac{0.001}{90} \right)^{-1} $$

> Примечание:
> 1. Параметр $s_{tube}$ переводим в [м]

С учетом загрязнения ($K_{zag}$):

$$ K_{zag} = \left( \frac{1}{K_{mat}} + R^* \right)^{-1} $$

> Примечание:
> 1. Выбор $R^*$ зависит от коэффициента $\beta$:
>     * Если $\beta = 1.0$, то $R^* = 10 \cdot 10^{-7}$
>     * Иначе $R^* = 1044 \cdot 10^{-7}$ (для $\beta \approx 0.75$)
>     * При $\beta < 0.75$ $R^*$ экстраполируется

### Шаг 5. Тепловой расчет и итерация

Коэффициент D:

$$ D = g_k \cdot F $$

Нагрев воды ($\Delta t_{heat}$):

$$ \Delta t_{heat} = \frac{D \cdot H_{steam}}{W} $$

> Примечание:
> 1. Параметр $W$ переводим в [кг/ч]
> 2. H_{steam} - H'{cond}

Температурный напор ($\delta t$):

$$ \delta t = \frac{\Delta t_{heat}}{\exp\left(\frac{K_{zag} \cdot F}{W}\right) - 1} $$

> Примечание:
> 1. Параметр $W$ переводим в [кг/ч]

Температура насыщения ($t_{sat}$):

$$ t_{sat} = t1_{main} + \Delta t_{heat} + \delta t $$


**Итерационный процесс:**
Необходимо подобрать распределение нагрузки или скорректировать параметры так, чтобы температуры насыщения в основном и встроенном пучках совпали:

$$ |t_{sat}^{main} - t_{sat}^{builtin}| \le 0.001 $$

В рамках упрощенного алгоритма производится балансировка нагрева воды встроенного пучка:

$$ \Delta t_{heat}^{builtin} = \frac{G_{steam} \cdot H_{steam} - \Delta t_{heat}^{main} \cdot W_{main}}{W^{builtin}} $$

После чего пересчитывается $t_{sat}^{builtin}$.

### Шаг 6. Определение итогового давления

**1. Давление в конденсаторе ($P_steam$):**

Определяется по таблицам насыщенного пара (IF97) для найденной температуры $t_{sat}^{main}$:

$$ P_k = f_{sat\_press}(t_{sat}^{main}) \quad [\text{кгс/см}^2] $$

> Примечание:
> 1. Для валидации используем уравнение:
> 
> $$ P_k = \frac{\exp\left( 82.86568 + \frac{1.028003}{100} \cdot t1_{main} - \frac{7821.541}{t1_{main}} - 11.48776 \cdot \ln(t1_{main}) \right)}{0.0981} $$
>
> 2. Параметр $t1_{main}$ переводим в [К]

**2. Характеристика эжектора ($P_{ej}$):**

$$ P_{ej} = \frac{0.009 + 0.0003 \frac{G_{air}}{Z_{ejectors}} + 10 \cdot \exp\left( \frac{-7821.5}{T} + 82.86 + 10280 \cdot T - 11.48 \cdot \ln(T) \right)}{0.980665} $$

> Примечание:
> 1. Параметр $T$ определяется как: $T = t1_{main} + 1$
> 2. Параметр $t1_{main}$ переводим в [К]

## 7. Выходные данные (Outputs)

| Параметр | Переменная в коде | Символ | Единица | Описание |
| :--- | :--- | :---: | :---: | :--- |
| Давление за турбиной | `pressure_flow_path_1` | $P_{steam}$ | кгс/см² | Давление |
| Температура насыщения | `temperature_saturation_cooling_tubes_of_the_main_bundle` | $t_{sat}$ | °С | |
| Коэфф. теплопередачи ОП | `coefficient_Kzag_cooling_tubes_of_the_main_bundle` | $K_{zag}^{main}$ | Вт/(м²·К) | |
| Коэфф. теплопередачи ВП | `_` | $K_{zag}^{builtin}$ | Вт/(м²·К) | |
| Нагрев воды ОП | `temperature_cooling_tubes_of_the_main_bundle` | $\Delta t_{heat}^{main}$ | °С | |
| Нагрев воды ВП | `_` | $\Delta t_{heat}^{builtin}$ | °С | |


## 8. Контрольный пример (Verification)

**Вход:**
*   `diameter_inside_of_pipes` = 24 мм, `thickness_pipe_wall` = 1 мм
*   `length_cooling_tubes_of_the_main_bundle` = 9000 мм, `N` = 10000 шт (условно)
*   `mass_flow_steam_nom` = 300 т/ч
*   `mass_flow_cooling_water` = 16000 т/ч
*   `temperature_cooling_water_1` = 20 °C
*   `mass_flow_flow_path_1` = 300 т/ч, `enthalpy` = 2300 кДж/кг

**Ожидаемый результат:**
*   `pressure_flow_path_1` ≈ 0.05 - 0.07 кгс/см² (значение зависит от точного расчета экспонент и свойств пара)

*   `velocity_real` = ... (допуск ±0.01)
