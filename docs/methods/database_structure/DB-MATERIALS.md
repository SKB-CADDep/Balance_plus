# [DB-MATERIALS] База данных: Конструкционные материалы

**Версия схемы:** 1.0
**Статус:** Активно
**Ответственный:** @D0k2
**Применение:** Теплофизические и прочностные расчеты, подбор аналогов.

## 1. Описание сущности
База данных содержит физико-механические и химические свойства конструкционных материалов (сталей, сплавов), используемых в энергетическом оборудовании.
Ключевая особенность — зависимость большинства свойств от температуры.
Данные хранятся в формате JSON, где каждый файл представляет собой один материал.

## 2. Структура данных (Schema)

Каждый объект материала состоит из 4 основных секций:
1.  **Metadata:** Общая информация (имя, классификация).
2.  **Physical Properties:** Теплофизические свойства (зависят от T).
3.  **Mechanical Properties:** Прочностные характеристики (зависят от T, категории прочности, твердости).
4.  **Chemical Properties:** Химический состав.

### 2.1. Метаданные (Metadata)
| Ключ | Тип | Описание | Пример |
| :--- | :---: | :--- | :--- |
| `material_id` | UUID | Уникальный идентификатор | `"858dc196-..."` |
| `metadata.name_material_standard` | String | Основное марочное обозначение | `"15Х1М1ФЛ"` |
| `metadata.application_area` | List | Область применения | `["Литейные материалы"]` |
| `metadata.classification` | Object | Классификатор (класс, группа) | `{...}` |

### 2.2. Физические свойства (Physical Properties)
Каждое свойство — это объект, содержащий метаинформацию и массив точек `[Температура, Значение]`.

**Общая структура объекта свойства:**
```json
"property_key": {
  "property_name": "Название (RU)",
  "property_unit": "Единица измерения",
  "property_source": "Источник данных (ГОСТ/ОСТ)",
  "temperature_value_pairs": [ [T1, Value1], [T2, Value2] ... ]
}
```

**Список физических свойств:**

| Ключ (JSON Key) | Символ | Единица | Описание |
| :--- | :---: | :---: | :--- |
| `modulus_elasticity` | $E$ | МПа | Модуль упругости (Юнга) |
| `coefficient_linear_expansion` | $\alpha$ | $1/^\circ\text{C} \cdot 10^{-6}$ | Коэфф. линейного температурного расширения |
| `coefficient_thermal_conductivity` | $\lambda$ | Вт/(м·°С) | Коэффициент теплопроводности |
| `density` | $\rho$ | кг/м³ | Плотность материала |
| `specific_heat` | $C_p$ | Дж/(кг·°С) | Удельная теплоемкость |

> **Важно:** Интерполяция значений между точками должна выполняться линейно, если иное не указано в спецификации расчетного модуля.

### 2.3. Механические свойства (Mechanical Properties)
В отличие от физических, механические свойства часто зависят от **категории прочности**. Поэтому они обернуты в массив `strength_category`.

**Структура:**
```json
"mechanical_properties": {
  "strength_category": [
    {
      "value_strength_category": "Категория (напр. КП-25) или '-'",
      "hardness": [ { "min_value": 159, "max_value": 223, "unit": "HB" } ],
      "yield_strength": { ...свойство... },
      "tensile_strength": { ...свойство... },
      ...
    }
  ]
}
```

**Список механических свойств:**

| Ключ (JSON Key) | Символ | Единица | Описание |
| :--- | :---: | :---: | :--- |
| `yield_strength` | $\sigma_{0.2}$ | МПа | Предел текучести |
| `tensile_strength` | $\sigma_{в}$ | МПа | Предел прочности (временное сопротивление) |
| `impact_strength` | $KCU$ | Дж/см² | Ударная вязкость |
| `tensile_strength_limit_10_thousands_hours` | $\sigma_{дп}^{10^4}$ | МПа | Предел длит. прочности (10 тыс. ч) |
| `tensile_strength_limit_100_thousands_hours`| $\sigma_{дп}^{10^5}$ | МПа | Предел длит. прочности (100 тыс. ч) |
| `tensile_strength_limit_200_thousands_hours`| $\sigma_{дп}^{2 \cdot 10^5}$ | МПа | Предел длит. прочности (200 тыс. ч) |
| `сreep_strain_rate_1_100_thousands_hours` | $\sigma_{1/10^5}$ | МПа | Предел ползучести (1% за 100 тыс. ч) |
| `decrement_oscillations_at_...` | $\delta\psi$ | - | Декремент колебаний (при разных напряжениях) |
| `fatigue_limit_...` | $\sigma_{-1}$ | МПа | Предел выносливости (циклическая прочность) |

### 2.4. Химический состав (Chemical Properties)
Описывает элементный состав сплава. Может содержать несколько вариантов (стандартов).

**Структура:**
```json
"composition": [
  {
    "base_element": "Fe",
    "other_elements": [
      {
        "element": "C", "min_value": 0.14, "max_value": 0.20, "unit_value": "%"
      },
      ...
    ]
  }
]
```

## 3. Правила использования и Валидации

1.  **Температурная зависимость:**
    *   Свойства задаются точками `[T, Value]`.
    *   При запросе свойства для температуры $T_{req}$, не совпадающей с табличной, следует применять линейную интерполяцию.
    *   Экстраполяция за пределы заданного диапазона температур **запрещена**.

2.  **Единицы измерения:**
    *   Все значения в БД хранятся строго в единицах СИ (МПа, Дж, Вт, °С), кроме особых случаев, указанных в поле `property_unit`.
    *   Коэффициент линейного расширения ($\alpha$) часто приводится в справочниках как $12.5 \cdot 10^{-6}$. В БД хранится значение `12.5` (с пометкой `1/°С` или указанием множителя в описании).

3.  **Приоритетность:**
    *   Поле `property_source` указывает норматив (ОСТ, ГОСТ).
    *   Поле `property_subsource` (например, `[3]`) ссылается на конкретную таблицу или страницу в источнике.

## 4. Пример JSON (Payload)

Фрагмент типичного объекта материала:

```json
{
  "material_id": "858dc196-6712-4dbb-bfdd-201c8ca5c65c",
  "metadata": {
    "name_material_standard": "15Х1М1ФЛ"
  },
  "physical_properties": {
    "coefficient_thermal_conductivity": {
      "property_name": "Коэффициент теплопроводности",
      "property_unit": "Вт/(м·°С)",
      "temperature_value_pairs": [
        [100.0, 41.0],
        [300.0, 39.0],
        [600.0, 34.0]
      ]
    }
  }
}
```

## 5. Связь с методиками расчета
